namespace = usa_secession_crisis

usa_secession_crisis.1 = {
	type = country_event
	placement = scope:first_seceded_state
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_capitalists_meeting.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/capitalists_meeting"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	title = usa_secession_crisis.1.t
	desc = usa_secession_crisis.1.d
	flavor = usa_secession_crisis.1.f

	duration = 3

	trigger = {
		exists = c:USA
		c:USA = ROOT
		NOT = { has_variable = first_secession }
	}

	immediate = { 
		random_scope_state = {
			limit = {
				exists = c:USA
				owner = {
					c:USA = THIS
				}
				is_slave_state = yes
				is_capital = no
				is_incorporated = yes
			}
			weight = {
				base = 1
				modifier = {
					state_region = s:STATE_SOUTH_CAROLINA
					add = 100
				}
				modifier = {
					OR = {
						state_region = s:STATE_GEORGIA
						state_region = s:STATE_MISSISSIPPI
						state_region = s:STATE_ALABAMA
						state_region = s:STATE_LOUISIANA
						state_region = s:STATE_TEXAS
					}
					add = 10
				}
				modifier = {
					OR = {
						state_region = s:STATE_NORTH_CAROLINA
						state_region = s:STATE_TENNESSEE
						state_region = s:STATE_VIRGINIA
						state_region = s:STATE_WEST_VIRGINIA
						state_region = s:STATE_ARKANSAS
					}
					add = 5
				}
				modifier = {
					OR = {
						state_region = s:STATE_DELAWARE
						state_region = s:STATE_MARYLAND
					}
					add = -40
				}
				modifier = {
					OR = {
						state_region = s:STATE_KENTUCKY
						state_region = s:STATE_MISSOURI
					}
					add = -20
				}
				modifier = {
					is_incorporated = no
					add = -100
				}
			}

			save_scope_as = first_seceded_state
			
			if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_SOUTH_CAROLINA
					}
				}
				create_country = {
					tag = SCL
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_GEORGIA
					}
				}
				create_country = {
					tag = GEG
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_MISSISSIPPI
					}
				}
				create_country = {
					tag = MIS
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_ALABAMA
					}
				}
				create_country = {
					tag = ALA
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_NORTH_CAROLINA
					}
				}
				create_country = {
					tag = NCL
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_TENNESSEE
					}
				}
				create_country = {
					tag = TEN
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_FLORIDA
					}
				}
				create_country = {
					tag = FLR
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						OR = {
							state_region = s:STATE_VIRGINIA
							state_region = s:STATE_WEST_VIRGINIA
						}
					}
				}
				create_country = {
					tag = VIR
					origin = ROOT
					state = s:STATE_VIRGINIA.region_state:USA
					state = s:STATE_WEST_VIRGINIA.region_state:USA
				}
				state_region = {
					add_claim = c:USA
				}
				s:STATE_VIRGINIA = {
					set_variable = first_seceded_state
				}
				s:STATE_WEST_VIRGINIA = {
					set_variable = first_seceded_state
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_ARKANSAS
					}
				}
				create_country = {
					tag = ARK
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_LOUISIANA
					}
				}
				create_country = {
					tag = LOU
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_TEXAS
					}
				}
				create_country = {
					tag = TEX
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_KENTUCKY
					}
				}
				create_country = {
					tag = KEN
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:first_seceded_state = {
						state_region = s:STATE_MISSOURI
					}
				}
				create_country = {
					tag = MIO
					origin = ROOT
					state = scope:first_seceded_state
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else = {
				if = {
					limit = {
						NOT = { exists = c:CSA }
					}
					create_country = {
						tag = CSA
						origin = ROOT
						state = scope:first_seceded_state
					}
					state_region = {
						add_claim = c:USA
					}
					scope:first_seceded_state = {
						set_state_type = incorporated
					}
				}
				else = {
					set_state_owner = c:CSA
					state_region = {
						add_claim = c:USA
					}
					scope:first_seceded_state = {
						set_state_type = incorporated
					}
				}
			}

			set_variable = first_seceded_state

		}
		
		add_journal_entry = { 
			type =  je_usa_secession_crisis
		}
		set_variable = first_secession
	}

	option = {
		name = usa_secession_crisis.1.a
        default_option = yes
	}
}

usa_secession_crisis.2 = {
	type = country_event
	placement = scope:new_secession
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_capitalists_meeting.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/capitalists_meeting"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	title = usa_secession_crisis.2.t
	desc = usa_secession_crisis.2.d
	flavor = usa_secession_crisis.2.f

	duration = 3

	trigger = {
		exists = c:USA
		c:USA = ROOT
		has_variable = first_secession
		NOT = { has_variable = CSA_formed }
	}

	immediate = { 
		random_scope_state = {
			limit = {
				exists = c:USA
				owner = {
					c:USA = THIS
				}
				is_slave_state = yes
				is_capital = no
				OR = {
					is_incorporated = yes
					is_being_incorporated = yes
					state_region = s:STATE_OKLAHOMA
				}
			}
			weight = {
				base = 1
				modifier = {
					any_neighbouring_state = {
						count = 1
						OR = {
							has_variable = first_seceded_state
							has_variable = first_wave_seceded_state
						}
					}
					add = 30
				}
				modifier = {
					any_neighbouring_state = {
						count = 2
						OR = {
							has_variable = first_seceded_state
							has_variable = first_wave_seceded_state
						}
					}
					add = 30
				}
				modifier = {
					any_neighbouring_state = {
						count >= 3
						OR = {
							has_variable = first_seceded_state
							has_variable = first_wave_seceded_state
						}
					}
					add = 45
				}
				modifier = {				
					ig_state_pol_strength_share = {
						target = scope:southern_slaveowners
						value >= .1
					}
					add = 10
				}
				modifier = {				
					ig_state_pol_strength_share = {
						target = scope:southern_slaveowners
						value >= .15
					}
					add = 20
				}
				modifier = {
					state_region = s:STATE_SOUTH_CAROLINA
					add = 50
				}
				modifier = {
					OR = {
						state_region = s:STATE_GEORGIA
						state_region = s:STATE_MISSISSIPPI
						state_region = s:STATE_ALABAMA
						state_region = s:STATE_LOUISIANA
						state_region = s:STATE_TEXAS
					}
					add = 20
				}
				modifier = {
					OR = {
						state_region = s:STATE_NORTH_CAROLINA
						state_region = s:STATE_TENNESSEE
						state_region = s:STATE_VIRGINIA
						state_region = s:STATE_WEST_VIRGINIA
						state_region = s:STATE_ARKANSAS
					}
					add = 10
				}
				modifier = {
					OR = {
						state_region = s:STATE_DELAWARE
						state_region = s:STATE_MARYLAND
					}
					add = -40
				}
				modifier = {
					OR = {
						state_region = s:STATE_KENTUCKY
						state_region = s:STATE_MISSOURI
					}
					add = -20
				}
			}

			owner = {
				any_interest_group = {
					interest_group = ig:ig_landowners
					save_scope_as = southern_slaveowners
				}
			}

			save_scope_as = new_secession
			
			if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_SOUTH_CAROLINA
					}
				}
				create_country = {
					tag = SCL
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_GEORGIA
					}
				}
				create_country = {
					tag = GEG
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_MISSISSIPPI
					}
				}
				create_country = {
					tag = MIS
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_ALABAMA
					}
				}
				create_country = {
					tag = ALA
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_NORTH_CAROLINA
					}
				}
				create_country = {
					tag = NCL
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_TENNESSEE
					}
				}
				create_country = {
					tag = TEN
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_FLORIDA
					}
				}
				create_country = {
					tag = FLR
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						OR = {
							state_region = s:STATE_VIRGINIA
							state_region = s:STATE_WEST_VIRGINIA
						}
					}
				}
				create_country = {
					tag = VIR
					origin = ROOT
					state = s:STATE_VIRGINIA.region_state:USA
					state = s:STATE_WEST_VIRGINIA.region_state:USA
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_ARKANSAS
					}
				}
				create_country = {
					tag = ARK
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_LOUISIANA
					}
				}
				create_country = {
					tag = LOU
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_TEXAS
					}
				}
				create_country = {
					tag = TEX
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_KENTUCKY
					}
				}
				create_country = {
					tag = KEN
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_MISSOURI
					}
				}
				create_country = {
					tag = MIO
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else_if = {
				limit = {
					scope:new_secession = {
						state_region = s:STATE_OKLAHOMA
					}
				}
				create_country = {
					tag = SEQ
					origin = ROOT
					state = scope:new_secession
				}
				state_region = {
					add_claim = c:USA
				}
			}
			else = {
				if = {
					limit = {
						NOT = { exists = c:CSA }
					}
					create_country = {
						tag = CSA
						origin = ROOT
						state = scope:new_secession
					}
					state_region = {
						add_claim = c:USA
					}
					scope:new_secession = {
						set_state_type = incorporated
					}
				}
				else = {
					set_state_owner = c:CSA
					state_region = {
						add_claim = c:USA
					}
					scope:new_secession = {
						set_state_type = incorporated
					}
				}
			}

			set_variable = first_wave_seceded_state

		}

		set_variable = first_wave_secession

	}

	option = {
		name = usa_secession_crisis.2.a
        default_option = yes
	}
}

#Dynamic Montgomery Convention
usa_secession_crisis.3 = {
	type = country_event
	placement = scope:montgomery_convention_state
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_capitalists_meeting.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/capitalists_meeting"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	title = usa_secession_crisis.3.t
	desc = usa_secession_crisis.3.d
	flavor = usa_secession_crisis.3.f

	duration = 3

	trigger = {
		exists = c:USA
		c:USA = ROOT
		has_variable =  first_wave_secession
		any_state = {
				OR = {
					has_variable = first_seceded_state
					has_variable = first_wave_seceded_state
				}
			count > 6
		}
		NOT = { has_variable = CSA_formed }
	}

	immediate = {
		every_state = {
			limit = {
				has_variable = first_seceded_state
			}
			save_scope_as = first_confederate
		}
		create_country = {
			tag = CSA
			origin = ROOT
			state = scope:first_confederate
		}
		every_state = {
			limit = {
				OR = {
					has_variable = first_seceded_state
					has_variable = first_wave_seceded_state
				}
				NOT = {
					state_region = s:STATE_OKLAHOMA
				}
			}
			set_state_owner = c:CSA
		}
		every_state = {
			limit = {
				state_region = s:STATE_OKLAHOMA
				has_variable = first_wave_seceded_state
			}
			c:CSA = {
				create_diplomatic_pact = {
					country = c:SEQ
					type = puppet
				}
			}
		}
		c:CSA = {
			random_scope_state = {
				save_scope_as = montgomery_convention_state
			}
		}

		set_variable = CSA_formed
	}

	option = {
		name = usa_secession_crisis.3.a
        default_option = yes
	}
}

#Conflict Begins
usa_secession_crisis.4 = {
	type = country_event
	placement = scope:montgomery_convention_state
	
	event_image = {
		video = "gfx/event_pictures/europenorthamerica_capitalists_meeting.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/capitalists_meeting"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	title = usa_secession_crisis.4.t
	desc = usa_secession_crisis.4.d
	flavor = usa_secession_crisis.4.f

	duration = 3

	trigger = {
		exists = c:USA
		exists = c:CSA
		c:USA = ROOT
		has_variable = CSA_formed
		NOT = { has_variable = american_civil_war_intiated }
	}

	immediate = {
		c:CSA = {
			random_scope_state = {
				save_scope_as = civil_war_target
			}
		}
		create_diplomatic_play = {
			name = american_civil_war
			war = yes
			initiator = c:USA
			type = dp_annex_war

			target_state = scope:civil_war_target

		}
		every_scope_state = {
			limit = {
				is_slave_state = yes
				is_capital = no
				is_incorporated = yes
				NOT = {
					state_region = s:STATE_MARYLAND
					state_region = s:STATE_DELAWARE
				}
			}
			set_state_owner = c:CSA
		}
		set_variable = american_civil_war_intiated
	}

	option = {
		name = usa_secession_crisis.4.a
        default_option = yes
	}
}