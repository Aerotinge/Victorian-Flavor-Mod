namespace = silhak

silhak.1 = { #Third Wave Silhak
	type = country_event
	placement = root

	title = silhak.1.t
	desc = silhak.1.d
	flavor = silhak.1.f

	event_image = {
		video = "gfx/event_pictures/asia_union_leader.bk2"
	}
	  
	icon = "gfx/interface/icons/event_icons/event_protest.dds"
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	duration = 3

	trigger = {
		#triggered by JE
	}

	option = { #dismiss silhak
		name =  silhak.1.a
		default_option = yes
		add_modifier = {
			name = modifier_kor_dismissed_silhak
			months = 60
		}
		add_journal_entry = {
			type = je_silhak_return
		}

	}
	option = { #make reforms
		name =  silhak.1.b
		add_modifier = {
			name = modifier_kor_reforms_silhak
			months = 120
		}
		add_journal_entry = {
			type = je_silhak_reform
		}
	}
	option = { #strengthen the devout
		highlighted_option = yes
		name =  silhak.1.c
		trigger = {
			ig:ig_devout = { is_in_government = yes }
		}
		add_modifier = {
			name = modifier_kor_monks_silhak
			months = 60
		}
		add_journal_entry = {
			type = je_silhak_return
		}
	}
}

silhak.2 = { #Western disturbance (French expedition to Korea)
	type = country_event
	placement = root

	title = silhak.2.t
	desc = silhak.2.d
	flavor = silhak.2.f

	duration = 3

	event_image = {
		video = "votp_prison"
	}
	  
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	trigger = { 
		root = c:KOR
		NOT = { has_variable = korea_expedition_event }
		any_country = {
			country_rank = rank_value:great_power
			has_technology_researched = civilizing_mission
			has_interest_marker_in_region = region_manchuria
			NOT = { has_war_with = root }
		}
	}

	immediate = {
		set_variable = korea_expedition_event
		random_country = {
			limit = {
				country_rank = rank_value:great_power
				has_technology_researched = civilizing_mission
				has_interest_marker_in_region = region_manchuria
				NOT = { has_war_with = root }
			}
			save_scope_as = western_missionary
		}
		scope:western_missionary = {
			religion = {
				save_scope_as = western_religion 
			}
		}
		root = { save_scope_as = kor_scope }
	}
	option = {
		name = silhak.2.a
		scope:western_missionary = {
			trigger_event = { #To France, I killed your missionaries (sorry)
				id = silhak.3
				days = 14 
			} 
		}
	}
}

silhak.3 = { #To France, Korea killed your missionaries
	type = country_event
	placement = scope:kor_scope

	title = silhak.3.t
	desc = silhak.3.d
	flavor = silhak.3.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/southamerica_christianity.bk2"
	}
	  
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	trigger = {
		NOT = { has_variable = korea_missionary_response }
	}

	immediate = {
		set_variable = korea_missionary_response
		ig:ig_devout = {
			save_scope_as = church
			leader = { save_scope_as = church_leader }
		}
		c:KOR = {
			save_scope_as = kor_scope
		}
	}
	option = {
		name = silhak.3.a
		default_option = yes
		ai_chance = { base = 1 }
		create_diplomatic_play = {
	        name = french_expedition_to_korea
	      
	        target_country = scope:kor_scope
	        
	        type = dp_take_treaty_port
	        target_state = s:STATE_SEOUL.region_state:KOR

	        add_war_goal = {
	          holder = c:KOR
	          type = war_reparations
	          target_country = scope:western_missionary
	        }
      	}
	}
	option = {
		name = silhak.3.b
		ai_chance = { base = 1 }
		change_relations = {
			country = scope:kor_scope
			value = 20
		}
		add_modifier = {
			name = ignored_persecutions_of_missionaries
			months = 60
		}
	}
}

silhak.4 = {
	type = country_event
	placement = root

	title = silhak.3.t
	desc = silhak.3.d
	flavor = silhak.3.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/southamerica_christianity.bk2"
	}
	  
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	trigger = {
		has_state_in_state_region = STATE_SEOUL
		owns_entire_state_region = STATE_SEOUL #gyeonggi, but the states are for korea imported from vic2 in this game (except yangho)
	}
	option = {
		name = silhak.4.a #embolden the scholars and christians
		highlighted_option = yes
		trigger = {
			has_journal_entry = je_silhak_return
		}
		custom_tooltip = {
			text = silhak_progress_tt
			change_variable = {
				name = silhak_var
				add = 40
			}
		}
	}
	option = {
		name = silhak.4.b #leader of yangban becomes a jingoist
		ig:ig_landowners.leader = {
			set_ideology = ideology_jingoist
		}
	}
}

silhak.5 = {
	type = country_event
	placement = root

	title = silhak.3.t
	desc = silhak.3.d
	flavor = silhak.3.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/southamerica_christianity.bk2"
	}
	  
	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	trigger = {
		has_state_in_state_region = STATE_SEOUL
		NOT = { owns_entire_state_region = STATE_SEOUL } #gyeonggi, but the states are for korea imported from vic2 in this game (except yangho)
	}

	option = {
		name = silhak.4.a #confirm korea's isolationism
		default_option = yes
		highlighted_option = yes
		trigger = {
			has_journal_entry = je_silhak_return
		}
		custom_tooltip = {
			text = silhak_regress_tt
			change_variable = {
				name = silhak_var
				subtract = 20
			}
		}
	}
}