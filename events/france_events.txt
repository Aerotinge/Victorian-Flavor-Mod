namespace = france_event

#Napoleon 3 extradition from Switzerland
france_event.1 = {
	type = country_event
	placement = ROOT

	title = france_event.1.t
	desc = france_event.1.d
	flavor = france_event.1.f

	event_image = {
		video = "gfx/event_pictures/southamerica_aristocrats.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	trigger = {
		this ?= c:FRA
		exists = c:SWI
		game_date > 1836.1.1
		NOT = {
			OR = {
				has_variable = napoleon_3_switzerland
				has_global_variable = french_revolution_happened
			}
		}
	}

	immediate = {
		c:SWI = {
			save_scope_as = swi_scope
		}
		c:GBR = {
			save_scope_as = gbr_scope
		}
		ruler = {
			save_scope_as = ruler_scope
		}
		set_variable = napoleon_3_switzerland
	}

	option = {
		name = france_event.1.a
		default_option = yes

		random_list = {
			85 = {
				custom_tooltip = france_event.1.tt1
				set_variable = napoleon_3_extradition
			}
			15 = {
				custom_tooltip = france_event.1.tt2
				set_variable = napoleon_3_no_extradition
			}
		}
		c:SWI = {
			change_relations = {
				country = ROOT
				value = -25
		    }	
		}

	    ai_chance = {
			base = 85
		}
    }

	option = {
		name = france_event.1.b

		custom_tooltip = france_event.1.tt2
		set_variable = napoleon_3_no_extradition
		c:SWI = {
			change_relations = {
				country = ROOT
				value = 25
		    }	
		}

	    ai_chance = {
			base = 25	
		}
    }
}

#French Revolution 
france_event.2 = {
	type = country_event
	placement = ROOT

	title = france_event.2.t
	desc = france_event.2.d
	flavor = france_event.2.f

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_springtime_of_nations.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/springtime_of_nation"

	icon = "gfx/interface/icons/event_icons/event_revolt.dds"

	duration = 3

	trigger = {
		this ?= c:FRA
		NOT = {
			has_global_variable = french_revolution_happened
		}
		OR = {
			has_journal_entry = je_springtime_of_the_peoples
			radical_fraction = {
				value >= 0.25
			}
		}
	}

	immediate = {
		c:GBR = {
			save_scope_as = gbr_scope
		}
		ruler = {
			save_scope_as = ruler_scope
		}
		set_global_variable = french_revolution_happened
	}

	option = {
		name = france_event.2.a
		default_option = yes

		activate_law = law_type:law_presidential_republic
		activate_law = law_type:law_universal_suffrage
		activate_law = law_type:law_right_of_assembly

        set_ruling_interest_groups = {
        	ig_intelligentsia
        }
		custom_tooltip = {
			text = france_event.2.tt1
		}
		create_character = {
			template = louis_napoleon_character_template
			on_created = {
				set_variable = napoleon3
			}
		}
		custom_tooltip = {
			text = france_event.2.tt2
		}
        hidden_effect = {
        	trigger_event = { id = france_event.3 days = 1}
		}

	    ai_chance = {
			base = 1
		}
    }
}

france_event.3 = {
	type = country_event
	placement = root
	hidden = yes
	duration = 0

	immediate = {
		create_character = {
			# Louis Eugène Cavaignac
			is_general = no
			first_name = "Louis_Eugene"
			last_name = "Cavaignac"
			ruler = yes
			birth_date = 1802.10.15
			ig_leader = yes
			interest_group = ig_intelligentsia
			ideology = ideology_republican
			traits = {
				experienced_political_operator
			}
			on_created = {
				set_variable = cavaignac
			}
		}
		add_journal_entry = {
			type = je_french_revolution_election
		}
	}
}

#Rigged Elections?
france_event.4 = {
	type = country_event
	placement = ROOT

	title = france_event.4.t
	desc = france_event.4.d
	flavor = france_event.4.f

	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/asia/politician_parliament_motion"

	icon = "gfx/interface/icons/event_icons/event_election.dds"

	duration = 1

	immediate = {
		ruler = {
			save_scope_as = ruler_scope
		}
		random_scope_character = {
			limit = {has_variable = napoleon3}
			save_scope_as = napoleon3_scope
		}
		random_scope_character = {
			limit = {has_variable = cavaignac}
			save_scope_as = cavaignac_scope
		}
	}

	option = {
		name = france_event.4.a
		default_option = yes

	    ai_chance = {
			base = 80
		}
    }
	option = {
		name = france_event.4.b

		ig:ig_petty_bourgeoisie = {
			add_modifier = {
				name = elections_rigged_1
				months = long_modifier_time
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = elections_rigged_1
				months = long_modifier_time
			}
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = elections_rigged_2
				months = long_modifier_time
			}
		}
		set_variable = napoleon3_rigged

	    ai_chance = {
			base = 10
		}
    }
	option = {
		name = france_event.4.c

		ig:ig_intelligentsia = {
			add_modifier = {
				name = elections_rigged_1
				months = long_modifier_time
			}
		}
		ig:ig_petty_bourgeoisie = {
			add_modifier = {
				name = elections_rigged_2
				months = long_modifier_time
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = elections_rigged_2
				months = long_modifier_time
			}
		}
		set_variable = cavaignac_rigged

	    ai_chance = {
			base = 10
		}
    }
}