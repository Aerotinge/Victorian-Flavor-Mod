namespace = regency

regency.1 = { 
	title = regency.1.title
	desc = regency.1.desc
	flavor = regency.1.flavor

	duration = 1

	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/aristocrats"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	trigger = {
		AND = {
			exists = c:BRZ
			this = c:BRZ
		}
	}

	option = { 
		name = regency.1.a
		default_option = yes
		trigger = {
        	NOT = {
				exists = c:ECF
			}
		}
		s:STATE_PERNAMBUCO.region_state:BRZ = {
			add_radicals = {
				value = large_radicals
			}
		}
		s:STATE_PIAUI.region_state:BRZ = {
			custom_tooltip = regency.elites_fearing
			add_radicals = {
				strata = rich
				value = medium_radicals
			}
		}
		s:STATE_PARAIBA.region_state:BRZ = {
			custom_tooltip = regency.elites_fearing
			add_radicals = {
				strata = rich
				value = medium_radicals
			}
		}
		s:STATE_RIO_GRANDE_DO_NORTE.region_state:BRZ = {
			custom_tooltip = regency.elites_fearing
			add_radicals = {
				strata = rich
				value = medium_radicals
			}
		}
		s:STATE_CEARA.region_state:BRZ = {
			custom_tooltip = regency.elites_fearing
			add_radicals = {
				strata = rich
				value = medium_radicals
			}
		}
	}
	
	option = { 
		name = regency.1.b
		trigger = {
        	NOT = {
				exists = c:BLD
			}
		}
		s:STATE_MARANHAO.region_state:BRZ = {
			add_radicals = {
				value = large_radicals
			}
		}
		s:STATE_PIAUI.region_state:BRZ = {
			custom_tooltip = regency.elites_fearing
			add_radicals = {
				strata = rich
				value = medium_radicals
			}
		}
		s:STATE_GOIAS.region_state:BRZ = {
			custom_tooltip = regency.elites_fearing
			add_radicals = {
				strata = rich
				value = medium_radicals
			}
		}
	}

	option = { 
		name = regency.1.c
		default_option = yes
		trigger = {
        	NOT = {
				exists = c:SAB
			}
		}
		s:STATE_BAHIA.region_state:BRZ = { 
			add_radicals = {
				strata = rich
				value = 0.15
			}
			add_radicals = {
				strata = middle
				value = medium_radicals
			}
		}
	}
}

regency.2 = {
	title = regency.2.title
	desc = regency.2.desc
	flavor = regency.2.flavor

	duration = 1

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/gold_prospectors"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	immediate = {
		random_scope_state = {
			limit = {
				AND = {
					any_neighbouring_state = {
						NOT = { this = root.capital }
					}
					is_capital = no
				}
			}
			save_scope_as = distant_states
		}
	}

	trigger = {
        #je trigger
	}


	option = {
		name = regency.2.a
		default_option = yes
		add_modifier = {
				name = administrative_independence
				months = 6
		}
	}
	option = {
		name = regency.2.b
		add_modifier = {
			name = denied_political_independence
			months = 6
		}
		scope:distant_states = {
			add_radicals = {
				value = 0.05
			}
		}
		
	}
	option = {
		name = regency.2.c
		scope:distant_states = {
			add_radicals = {
				value = 0.15
			}
		}
	}
}

regency.3 = {
	title = regency.3.title
	desc = regency.3.desc
	flavor = regency.3.flavor

	duration = 1

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/gold_prospectors"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	immediate = {
		random_scope_state = {
			limit = {
				AND = {
					has_building = building_conscription_center
					is_capital = no
				}
				
			}
			save_scope_as = conscript_state
		}
		set_variable = {
			name = added_rage
			value = var:army_rage
		}
		set_variable = {
			name = appeased_rage
			value = var:army_rage
		}
		change_variable = {
			name = added_rage
			add = 1
		}
		change_variable = {
			name = appeased_rage
			subtract = 0.5
		}
	}

	trigger = {
		is_at_war = yes
	}


	option = {
		name = regency.3.a
		scope:conscript_state = {
			add_modifier = {
				name = conscripts_mutiny
				months = 12
			}
			add_loyalists = {
				value = 0.1
			}
		}
	}

	option = {
		name = regency.3.b
		change_variable = {
			name = army_rage
			add = 1
		}
		custom_tooltip = {
			text = regency.added_rage
			if = {
				limit = {
					has_modifier = disorganized_army
				}
				remove_modifier = disorganized_army
			}
			if = {
				limit = {
					NOT = { has_modifier = disorganized_army }
				}
				add_modifier = {
					name = disorganized_army
					multiplier = var:added_rage
				}
				scope:conscript_state = {
					add_radicals = {
						value = 0.1
					}
				}
			}
		}
	}

	option = {
		name = regency.3.c
		default_option = yes
		change_variable = {
			name = army_rage
			subtract = 0.5
		}
		custom_tooltip = {
			text = regency.appeased_rage
			if = {
				limit = {
					has_modifier = disorganized_army
				}
				remove_modifier = disorganized_army
				remove_modifier = army_investments
			} 
			if = {
				limit = {
					NOT = { has_modifier = disorganized_army }
				}
				add_modifier = {
					name = disorganized_army
					multiplier = var:appeased_rage
				}
				add_modifier = {
					name = army_investments
					months = 6
					multiplier = var:appeased_rage
				}
			}	
		}	
	}
}

regency.4 = {
	title = regency.4.title
	desc = regency.4.desc
	flavor = regency.4.flavor

	duration = 1

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/gold_prospectors"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	immediate = {
		random_scope_state = {
			limit = {
				AND = {
					any_neighbouring_state = {
						NOT = { this = root.capital }
					}
					is_capital = no
				}
			}
			save_scope_as = distant_states
		}
		set_variable = {
			name = added_commanders_rage
			value = var:commanders_rage
		}
		set_variable = {
			name = appeased_commanders_rage
			value = var:commanders_rage
		}
		change_variable = {
			name = added_commanders_rage
			add = 1
		}
		change_variable = {
			name = appeased_commanders_rage
			subtract = 1
		}		
	}

	trigger = {
		is_at_war = yes
	}

	option = {
		name = regency.4.a
		default_option = yes
		change_variable = {
			name = commanders_rage
			subtract = 0.5
		}
		every_scope_general = {
			if = {
				limit = {
					has_modifier = army_stalling
				}
				remove_modifier = army_stalling
			}
			if = {
				limit = {
					NOT = {has_modifier = army_stalling}
				}
				add_modifier = {
					name = army_stalling
					months = 6
					multiplier = var:appeased_commanders_rage
					is_decaying = yes
				}
			}
		}
		add_modifier = {
			name = high_commmand_talk
			months = 3
		}
	}

	option = {
		name = regency.4.b
		ig:ig_armed_forces = {
			interest_group_approval_add = -4
		}
		scope:distant_states = {
			add_radicals = {
				value = 0.10
			}
		}
	}

	option = {
		name = regency.4.c
		change_variable = {
			name = commanders_rage
			add = 1
		}
		every_scope_general = {
			if = {
				limit = {
					has_modifier = army_stalling
				}
				remove_modifier = army_stalling
			}
			if = {
				limit = {
					NOT = {has_modifier = army_stalling}
				}
				add_modifier = {
					name = army_stalling
					months = 6
					multiplier = var:added_commanders_rage
					is_decaying = yes
				}
			}
		}
	}
}

regency.5 = {
	title = regency.5.title
	desc = regency.5.desc
	flavor = regency.5.flavor

	duration = 1

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/gold_prospectors"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	immediate = {
		random_scope_state = {
			limit = {
				AND = {
					any_neighbouring_state = {
						NOT = { this = root.capital }
					}
					is_capital = no
				}
			}
			save_scope_as = distant_states
			set_variable = {
				name = added_commanders_rage
				value = var:commanders_rage
			}
			set_variable = {
				name = appeased_commanders_rage
				value = var:commanders_rage
			}
			change_variable = {
				name = added_commanders_rage
				add = 1
			}
			change_variable = {
				name = appeased_commanders_rage
				subtract = 1
			}
		}
	}

	trigger = { 
	}

	option = {
		name = regency.5.a
		default_option = yes
		change_variable = {
			name = commanders_rage
			subtract = 0.5
		}
		random_scope_general = {
			if = {
				limit = {
					has_modifier = commanders_debuff
				}
				remove_modifier = commanders_debuff
			}
			if = {
				limit = {
					NOT = {has_modifier = commanders_debuff}
				}
				add_modifier = {
					name = commanders_debuff
					months = 6
					multiplier = var:appeased_commanders_rage
					is_decaying = yes
				}
			}
		}
		scope:distant_states = {
			add_modifier = {
				name = high_commmand_talk
				months = 3
			}
		}
		
	}

	option = {
		name = regency.5.b
		change_variable = {
			name = commanders_rage
			subtract = 0.5
		}
		random_scope_general = {
			if = {
				limit = {
					has_modifier = commanders_debuff
				}
				remove_modifier = commanders_debuff
			}
			if = {
				limit = {
					NOT = {has_modifier = commanders_debuff}
				}
				add_modifier = {
					name = commanders_debuff
					months = 6
					multiplier = var:appeased_commanders_rage
					is_decaying = yes
				}
			}
		}
		scope:distant_states = {
			add_modifier = {
				name = high_commmand_order
				months = 3
			}
		}
	}

	option = {
		name = regency.5.c
		change_variable = {
			name = commanders_rage
			add = 1
		}
		every_scope_character = {
			if = {
				limit = { 
					NOT = { has_modifier = commanders_debuff }
				}
				add_modifier = {
					name = commanders_debuff
					months = 6
					multiplier = 1
				}
			}
			if = {
				limit = { 
					has_modifier = commanders_debuff
				}
				add_modifier = {
					name = commanders_debuff
					months = 3
					multiplier = var:added_commanders_rage
				}
			}
		}
	}
}

regency.6 = {
	title = regency.6.title
	desc = regency.6.desc
	flavor = regency.6.flavor

	duration = 1

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/gold_prospectors"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	immediate = {
		random_scope_state = {
			limit = {	
				AND = {
					OR = {
							has_building = building_coffee_plantation
							has_building = building_sugar_plantation
							has_building = building_livestock_ranch
							has_building = building_tobacco_plantation
						}
				 	is_capital = no
				}
			}
			save_scope_as = country_buildings
		}
	}

	trigger = { 
	}

	option = {
		name = regency.6.a
		scope:country_buildings = {
			add_modifier = {
				name = crashed_prices
				months = 3
			}
		}
	}

	option = {
		name = regency.6.b
		default_option = yes
		scope:country_buildings = {
			add_radicals = {
				value = 0.05
			}
			add_modifier = {
				name = tax_evasion
				months = 6
			}
		}
	}

	option = {
		name = regency.6.c
		scope:country_buildings = {
			add_radicals = {
				value = 0.2
			}
		}
	}
}

regency.7 = {
	title = regency.7.title
	desc = regency.7.desc
	flavor = regency.7.flavor

	duration = 1

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/gold_prospectors"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	immediate = {
		every_scope_state = {
			limit = {	
				AND = {
					OR = {
						has_building = building_coffee_plantation
						has_building = building_sugar_plantation
						has_building = building_livestock_ranch
						has_building = building_tobacco_plantation
					}
				 	is_capital = no
					NOT = { has_modifier =  plantations_inefficiencies }
				}
			}
			save_scope_as = country_states
		}
		
	}

	trigger = { 
	}

	option = {
		name = regency.7.a
		default_option = yes
		trigger = {
			any_scope_building = {
				AND = {
					OR = {
						is_building_type = building_coffee_plantation
						is_building_type = building_sugar_plantation
						is_building_type = building_livestock_ranch
						is_building_type = building_tobacco_plantation
					}
					NOT = { has_modifier =  plantations_inefficiencies }
				}
			}
			
		}
		every_scope_building = {
			limit = {
				AND = {
					OR = {
						is_building_type = building_coffee_plantation
						is_building_type = building_sugar_plantation
						is_building_type = building_livestock_ranch
						is_building_type = building_tobacco_plantation
					}
					NOT = { has_modifier =  plantations_inefficiencies }
				}
			}
			add_modifier = {
				name = plantations_inefficiencies
				months = 3
			}
			
		}
	}

	option = {
		name = regency.7.b
		scope:country_states = {
			add_radicals = {
				value = 0.05
			}
			add_modifier = {
				name = tax_evasion
				months = 3
			}
		}
	}

	option = {
		name = regency.7.c
		scope:country_states = {
			add_radicals = {
				value = 0.05
			}
		}
		add_modifier = {
			name = bend_to_their_will
			months = 3
		}
	}
}

regency.8 = {
	title = regency.8.title
	desc = regency.8.desc
	flavor = regency.8.flavor

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/gold_prospectors"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	immediate = {
	}

	trigger = {
		year <= 1840
	}

	option = {
		name = regency.8.a
		default_option = yes
		change_variable = {
			name = dom_pedro_legitimacy
			add = 1
		}
		custom_tooltip = nation_outrage
		hidden_effect = {
			every_scope_state = {
				limit = {
					is_capital = no
				}
				add_radicals = {
					value = 0.05
				}
			}
		}
	}

	option = {
		name = regency.8.b
		custom_tooltip = lawyers_support
		change_variable = {
			name = dom_pedro_legitimacy
			add = 0.5
		}
		hidden_effect = {
			capital = {
				add_loyalists = {
					value = 0.1
				}
			}
			every_scope_state = {
				limit = {
					is_capital = no
				}
				add_radicals = {
					value = 0.01
				}
			}
		}
	}

	option = {
		name = regency.8.c
		every_interest_group = {
			limit = {
				ig_approval >= 2
			}
			add_modifier = {
				name = rejected_political_maneuvers
				months = 12
				multiplier = 2
			}
		}
	}
}

regency.9 = {
	title = regency.9.title
	desc = regency.9.desc
	flavor = regency.9.flavor

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/gold_prospectors"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	immediate = {
	}

	trigger = { 
		year > 1840
	}

	option = {
		name = regency.9.a
		default_option = yes
		change_variable = {
			name = dom_pedro_legitimacy
			add = 1
		}
		custom_tooltip = nation_outrage
		hidden_effect = {
			every_scope_state = {
				limit = {
					is_capital = no
				}
				add_radicals = {
					value = 0.1
				}
			}
		}
	}

	option = {
		name = regency.9.b
		ruler = { 
			remove_variable = underoos_emperor 
		}
	}

	option = {
		name = regency.9.c
		every_interest_group = {
			add_modifier = {
				name = rejected_political_maneuvers
				months = 12
			}
		}
	}
}

regency.10 = {
	title = regency.10.title
	desc = regency.10.desc
	flavor = regency.10.flavor

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/gold_prospectors"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	trigger = {
        #je trigger
	}

	immediate = {
		create_country = {
			tag = ECF
			origin = this
			state = s:STATE_PERNAMBUCO.region_state:BRZ
			state = s:STATE_CEARA.region_state:BRZ
			state = s:STATE_RIO_GRANDE_DO_NORTE.region_state:BRZ
			state = s:STATE_PARAIBA.region_state:BRZ
		}
		create_country = {
			tag = SAB
			origin = this
			state = s:STATE_BAHIA.region_state:BRZ
		}
		create_country = {
			tag = BLD
			origin = this
			state = s:STATE_MARANHAO.region_state:BRZ
			state = s:STATE_PIAUI.region_state:BRZ
		}
		
	}

	option = {
		name = regency.10.a
		default_option = yes
		c:BRZ = {
			create_diplomatic_play = {
				type = dp_annex_war
				war = yes
				target_country = c:ECF
			}
			create_diplomatic_play = {
				type = dp_annex_war
				war = yes
				target_country = c:SAB
			}
			create_diplomatic_play = {
				type = dp_annex_war
				war = yes
				target_country = c:BLD
			}
		}
	}
	option = {
		name = regency.10.b
		c:BRZ = {
			create_diplomatic_pact = {
				country = c:BLD
				type = dominion
			}
			create_diplomatic_pact = {
				country = c:SAB
				type = dominion
			}
		}
	}
}

regency.11 = {
	title = regency.11.title
	desc = regency.11.desc
	flavor = regency.11.flavor

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/gold_prospectors"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	trigger = {
        #je regency completion
	}

	option = {
		name = regency.11.a
		default_option = yes
		
		this = {
			activate_law = law_type:law_monarchy

			ruler = {
				add_modifier = {
					name = emperor_dom_pedro
					multiplier = 2
				}
				add_modifier = {
					name = emperor_dom_pedro_temp
					months = long_modifier_time
				}
			}
			add_modifier = {
				name = regency_ended
				months = long_modifier_time
				multiplier = var:dom_pedro_legitimacy
				is_decaying = yes
			}
		}
	}

	option = {
		name = regency.11.b
		this = {
			activate_law = law_type:law_monarchy
			activate_law = law_type:law_autocracy
			ruler = {
				add_modifier = {
					name = emperor_dom_pedro
					is_decaying = yes
				}
				add_modifier = {
					name = emperor_dom_pedro_temp
					months = normal_modifier_time
					multiplier = 2
				}
			}
			add_modifier = {
				name = regency_ended
				months = normal_modifier_time
				multiplier = var:dom_pedro_legitimacy
				is_decaying = yes
			}
		}
		
	}
}