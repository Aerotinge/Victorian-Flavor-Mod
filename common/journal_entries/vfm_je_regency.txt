je_regency = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	weight = 10
    timeout = 2892 #Time for Dom Pedros 18th birthday
	should_be_pinned_by_default = yes

	immediate = {
		set_variable = {
			name = army_rage
			value = 1
		}
	}

	complete = {
		custom_tooltip = {
			text = legally_underage_emperor
			ruler = { 
				NOT = { has_variable = underoos_emperor }
			}
		}
		is_at_war = no
	}

	on_complete = {
		trigger_event = { id = regency.10 }
	}

    fail = {
		custom_tooltip = {
			text = brazilian_unity
			calc_true_if = {
				amount >= 6
				# NOT = { owns_entire_state_region = STATE_MATO_GROSSO }  # this is deactivated because mato grosso has "alto paraguay" as part of the state
				NOT = { owns_entire_state_region = STATE_PARANA }
				NOT = { owns_entire_state_region = STATE_GOIAS }
				NOT = { owns_entire_state_region = STATE_SANTA_CATARINA }	
				NOT = { owns_entire_state_region = STATE_PARA }
				NOT = { owns_entire_state_region = STATE_RIO_DE_JANEIRO }
				NOT = { owns_entire_state_region = STATE_RIO_GRANDE_DO_SUL }
				NOT = { owns_entire_state_region = STATE_MINAS_GERAIS }
				NOT = { owns_entire_state_region = STATE_BAHIA }
				NOT = { owns_entire_state_region = STATE_RIO_GRANDE_DO_NORTE }
				NOT = { owns_entire_state_region = STATE_MARANHAO }
				NOT = { owns_entire_state_region = STATE_CEARA }
				NOT = { owns_entire_state_region = STATE_PERNAMBUCO }
				NOT = { owns_entire_state_region = STATE_PARAIBA }
				NOT = { owns_entire_state_region = STATE_PIAUI }
				NOT = { owns_entire_state_region = STATE_SAO_PAULO }
			}
		}
    }
	
	on_fail = {
		trigger_event = { id = regency.9 }
	}

	on_monthly_pulse = {
		events = {
			regency.5
			regency.7
			regency.8
		}
		random_events = {
				40 = 0
				20 = regency.1
				20 = regency.2
				#20 = regency.3
				#20 = regency.4
		}
	}

	#on_yearly_pulse = {
	#	events = {
	#		-debug_mode -filewatcher
	#	}
	#	random_events = {
	#			50 = 0
	#			25 = regency.1
	#			25 = regency.2
	#		}
	#}
}

je_promised_better_prices = {
	icon = "gfx/interface/icons/event_icons/event_scales.dds"

	weight = 10
    timeout = 90
	should_be_pinned_by_default = yes

	immediate = {
		random_scope_state = {
			limit = {
				state_region = s:STATE_MARANHAO
				market = {
					owner = ROOT
				}
			}
			save_scope_as = maranhao_state
		}
	}

	complete = {
		scope:maranhao_state = {
			market = { #should be only on maranhao but i don't know if this is possible
				mg:sugar = {
					market_goods_pricier > 0.10
				}
			}
			OR = {
				any_scope_building = {
					is_building_type = building_sugar_plantation
					cash_reserves_ratio > 0.50
					weekly_profit > 0
					occupancy >= 0.75
					level >= 2
				}
				custom_tooltip = {
					text = sugar_workers # this could be improved by adding more trigger locs
					any_scope_pop = {
						standard_of_living > 8
						pop_is_discriminated = no
						pop_employment_building = building_sugar_plantation
					}
				}
			}
		}
	}

	on_complete = {
		trigger_event = { id = regency.10 }
	}
    
	
	on_timeout = {
		trigger_event = { id = regency.4 }
	}

}