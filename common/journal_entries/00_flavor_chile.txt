je_puq_colonization = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	is_shown_when_inactive = {
		exists = c:CHL
		root= c:CHL
	}

	complete = {
		institution_investment_level = {
			institution = institution_colonial_affairs
			value >= 2
		}
	}

	on_complete = {
        trigger_event = { 
			id = journal_flavor_chile.3
		}
	}

    should_be_pinned_by_default = yes
	weight = 100
}

je_easter_chl = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	is_shown_when_inactive = {
		exists = c:CHL
		root= c:CHL
		has_technology_researched = civilizing_mission
	}

    possible = { 
		has_interest_marker_in_region = region_oceania
	        }

	complete = {
		institution_investment_level = {
			institution = institution_colonial_affairs
			value >= 3
		}
    }				        

	on_complete = {
        trigger_event = { 
			id = journal_flavor_chile.4
		}
	}

    should_be_pinned_by_default = yes
	weight = 100
}

je_pacific_war_chl = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"

	is_shown_when_inactive = {
	    market_capital.market = {
			mg:sulfur = { 
				market_goods_pricier > 0.25 
			}
		}
		exists = c:CHL
		root= c:CHL
	}

	possible = {
		OR = {
		    ig:ig_industrialists = {
			    is_powerful = yes
			    is_in_government = yes
			    }			    
			AND = {
                OR = {
			        leader = {
				        has_ideology = ideology:ideology_jingoist_leader
				        has_ideology = ideology:ideology_market_liberal
				        has_ideology = ideology:ideology_protectionist	
				        }
				    }    			        		        				        		        	
		        }
	        }
	    }

	complete = {
		NOT = {
		    owns_entire_state_region = STATE_ANTOFAGASTA
		}
		exists = c:BOL
	    c:BOL = {
			relations:root <= -30 
	    	is_at_war = no			
		}            
        any_scope_state = {
			is_incorporated = yes
			    any_scope_building = {
				    is_building_type = building_sulfur_mine
				    level >= 3
				    percent > 0.9
			        occupancy > 0.9
			    }
	        }
		}

	on_complete = {
		trigger_event = { id = journal_flavor_chile.5 }
	}

	fail = {
		owns_entire_state_region = STATE_ANTOFAGASTA
		}

	invalid = {
		ig:ig_industrialists = {
			is_marginal = yes
		}
	}

	weight = 100
	should_be_pinned_by_default = yes
}

je_pacific_port.a = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	is_shown_when_inactive = {
			hidden_trigger = { NOT = { has_global_variable = pacific_port_completed } }		
            exists = c:CHL
            c:CHL = THIS
		    }

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		    	    	}    	    
	    is_at_war = no
	    s:STATE_SANTIAGO = {
		    any_scope_state = {
		        any_scope_building = {
		        is_building_type = building_port
		        level >= 2
		    	}
		    }
		}  	   
	    market_capital.market = {
	        mg:grain = { 
	        	market_goods_pricier < 0.25
	        	    }
	        	}	
	        }

	current_value = {
		value = root.num_trade_routes
	}

	goal_add_value = {
		value = root.num_trade_routes
		multiply = 0.3
	}	    

	on_complete = {
		hidden_effect = { set_global_variable = pacific_port_completed }	
        trigger_event = { 
			id = journal_flavor_chile.9 
		}	
	}

	progressbar = yes

	    fail = {
	        has_global_variable = pacific_port_completed
	        NOT = { exists = c:PEU }
	        }
	   

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_pacific_port_status
			}
		}
	}
    should_be_pinned_by_default = yes
	weight = 100
}

je_pacific_port.b = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	is_shown_when_inactive = {
			hidden_trigger = { NOT = { has_global_variable = pacific_port_completed } }		
            exists = c:PEU
            c:PEU = THIS
		    }

	complete = {
		scope:journal_entry = {
			is_goal_complete = yes
		    	    	}	    	    	
	    is_at_war = no
	    s:STATE_LIMA = {
		    any_scope_state = {
		    	any_scope_building = {
		    	is_building_type = building_port
		    	level >= 2
		    	}
		    }
		}  	   
	    market_capital.market = {
	        mg:grain = { 
	        	market_goods_pricier < 0.25
	        	    }
	        	}	
	        }

	current_value = {
		value = root.num_trade_routes
	}

	goal_add_value = {
		value = root.num_trade_routes
		multiply = 0.3
	}	    

	on_complete = {
		hidden_effect = { set_global_variable = pacific_port_completed }	
        trigger_event = { 
			id =  journal_flavor_chile.9 
		}	
	}

	progressbar = yes

	    fail = {
	        has_global_variable = pacific_port_completed
	        NOT = { exists = c:PEU }
	        }
	   

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_pacific_port_status
			}
		}
	}
    should_be_pinned_by_default = yes
	weight = 100
}
    
je_1881_treaty = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"

	is_shown_when_inactive = {
	        exists = c:ARG
			c:ARG = this  			
	    }

	complete = {
        c:BUE = {
            owns_entire_state_region = STATE_PATAGONIA
		}
        c:CHL = {
            owns_entire_state_region = STATE_ARAUCANIA
		}		
	}	

	on_complete = {
	    c:CHL = {
            trigger_event = { 
		    	id = journal_flavor_chile.13 
		    }
		}
	}

	fail = {
        c:BUE = {
            owns_entire_state_region = STATE_ARAUCANIA
		}
	}
    should_be_pinned_by_default = yes
	weight = 100
}    

je_silver_rush = {
	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	is_shown_when_inactive = {
			c:CHL = this  		
	    }

	complete = {
	       any_scope_state = {
	        s:STATE_SANTIAGO = {
		    	 any_scope_building = {
		    	  is_building_type = building_gold_fields
		    	  level >= 4
			      occupancy > 0.9
		    	    }
		    	}
		    }
		}

	on_complete = { 
	    trigger_event = { 
	        id = journal_flavor_chile.7  
	        }
        }    

    should_be_pinned_by_default = yes
	weight = 100   
}     

je_trains_efe = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	complete = {
	        s:STATE_SANTIAGO = {
		        any_scope_state = {
		    	 any_scope_building = {
		    	  is_building_type = building_railway
		    	  level >= 1
		    	    }
		    	}
		    }
            s:STATE_SANTIAGO = {
		        any_scope_building = {
			        is_building_type = building_gold_fields
			        has_active_production_method = pm_rail_transportation
		        }
		    }
		}

	on_complete = { 
	    trigger_event = { 
	        id = journal_flavor_chile.8  
	        }
        }           

    should_be_pinned_by_default = no
	weight = 100   
}     

je_chilean_identity1 = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	complete = {	
		custom_tooltip = {
			text = je_chilean_identity1_desc
			    c:CHL = {
					any_scope_war = {
					    is_war_participant = c:BOL
					    }
					    year <= 1840
					    }
					}
				}

	on_complete = { 
	    trigger_event = { 
	        id = journal_flavor_chile.19  
	        }
	    set_variable = {
	        name = war_of_the_confederation    
        }
    }
    
	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_chilean_identity1_status
			}
		}
	}        

    should_be_pinned_by_default = yes
	weight = 100 
}

je_chilean_identity2 = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	complete = {
		custom_tooltip = {
			text = je_chilean_identity1_desc
			    c:CHL = {
					has_variable = {
					    name = war_of_the_confederation
					    }
					}
				}
			c:CHL = {
			    is_at_war = no
			    }
			}

	on_complete = {
		random_primary_culture = {
			save_scope_as = andean_cu
		}
		add_primary_culture = cu:chilean
		remove_primary_culture = andean_cu

		every_scope_state = {
			limit = {
				state_region = {
						is_homeland = cu:andean
						OR = {
						    is_homeland = cu:aimara
						    is_homeland = cu:quechua
				    }
			    }
			state_region = {
				remove_homeland = andean
				add_homeland = chilean
			    }
		    }
	    }			
    }

	status_desc = {
		first_valid = {
			triggered_desc = {
				desc = je_chilean_identity2_status
			}
		}
	} 
	
    should_be_pinned_by_default = yes
	weight = 100 
}

je_araucania_ocupacion = {
	icon = "gfx/interface/icons/event_icons/event_war.dds"

	complete = {
		owns_entire_state_region = STATE_LOS_RIOS
			}

	on_complete = {
		every_scope_state = {
			limit = {
				state_region = {
						is_homeland = cu:patagonian
			    }
			state_region = {
				remove_homeland = patagonian
			    }
		    }
	    }
		create_country = {
            tag = PAT
			origin = c:APK
			state = s:STATE_PATAGONIA.region_state:APK
		}
        c:PAT = {
            annex = c:APK
	    }				
    }
	
    should_be_pinned_by_default = yes
	weight = 100 
}

je_saltpeter_war.1 = {
	icon = "gfx/interface/icons/event_icons/event_war.dds"

	complete = {
		owns_entire_state_region = STATE_TARAPACA
			}

	on_complete = {
            s:STATE_AREQUIPA = {
		    	set_owner_of_provinces = {
		    		country = c:CHL
		    		provinces = { x007035 x67EC55 }
		    	}
		    }
		    add_journal_entry = {
		        type = je_tacna_chilenization
		}
	}

	fail = {
	    c:PEU = {
	        owns_entire_state_region = STATE_TARAPACA
	        }
	    c:CHL = {	    						
	        is_at_war = no
	        }
	    }
	}
