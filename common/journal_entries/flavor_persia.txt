je_centralize_iran_process = {
	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	immediate = {trigger_event = { id = iran_abolish_autonomy.1 }}

	complete = {
		custom_tooltip = {
			text = integrate_khanates_iran
			has_variable = integrated_khanates_iran
		}
		custom_tooltip = {
			text = reclaim_coast_iran
			has_variable = reclaimed_coast_iran
		}
		custom_tooltip = {
			text = integrate_qaenat_iran
			has_variable = integrated_qaenat_iran
		}
		custom_tooltip = {
			text = integrate_herat_iran
			has_variable = integrated_herat_iran
		}
	}
	
	timeout = 22000

	on_complete = {
		trigger_event = { id = iran_flavour_wip.1 }
		remove_modifier = a_shah_in_name
	}

	on_timeout = {
		trigger_event = { id = iran_flavour_wip.2 }
	}

	goal_add_value = {
		add = 4
	}

	progressbar = yes

	weight = 10000
	should_be_pinned_by_default = yes
}

je_persia_integrate_khans = {
	icon = "gfx/interface/icons/event_icons/event_centralization.dds"

	complete = {
		OR = {
			NOT = { has_law = law_type:law_hereditary_bureaucrats }
			AND = {
				owns_entire_state_region = STATE_KHORASAN
				owns_entire_state_region = STATE_LURISTAN
				owns_entire_state_region = STATE_TABRIZ
			}
		}
		
		bureaucracy >= 0 
		approaching_bureaucracy_shortage = no
	}

	on_complete = {
		set_variable = integrated_khanates_iran
		every_country = {
			limit = {
				is_subject_of = c:PER
				OR = {
					country_has_primary_culture = cu:kurdish
					country_has_primary_culture = cu:turkmen
					this = c:ARB
					this = c:TAL
					this = c:JEL
				}
			}
			save_scope_as = khanate_annex_target
			c:PER = {
				annex = scope:khanate_annex_target
			}
		}
	}

	weight = 10000
}

je_persia_reclaim_coast = {
	icon = "gfx/interface/icons/event_icons/event_naval.dds"

	complete = {
		OR = {
			custom_tooltip = {
				text = integrate_the_coast
				has_variable = reclaimed_coast_iran
			}
			AND = {
				owns_entire_state_region = STATE_LARISTAN
				owns_entire_state_region = STATE_FARS
			}
		}
		}

		bureaucracy >= 0 
		approaching_bureaucracy_shortage = no
	}

	on_complete = {
		set_variable = reclaimed_coast_iran
		every_country = {
			limit = {
				has_diplomatic_pact = {
					who = c:PER
					type = tributary
					is_initiator = no
				}
				OR = {
					has_state_in_state_region = STATE_FARS
					has_state_in_state_region = STATE_LARISTAN
				}
				any_scope_state = {
					is_coastal = yes
				}
			}
			save_scope_as = coast_annex_target
			c:PER = {
				annex = scope:coast_annex_target
			}
		}
	}

	weight = 10000
}

je_persia_integrate_qaenat = {
	icon = "gfx/interface/icons/event_icons/event_colonial.dds"

	complete = {
		exists = c:QZM
		c:QZM = {
			relations:root >= relations_threshold:amicable
		}
		bureaucracy >= 0 
		approaching_bureaucracy_shortage = no
	}

	on_complete = {
		set_variable = integrated_qaenat_iran
		annex = c:QZM
	}

	invalid = {
		OR = {
			NOT = {
				exists = c:QZM
			}
			NOT = {
				c:QZM = {
					is_subject_of = c:PER
				}
			}
		}
	}

	on_invalid = {
		set_variable = integrated_qaenat_iran
	}

	weight = 10000
}

je_persia_integrate_herat = {
	icon = "gfx/interface/icons/event_icons/event_revolt.dds"

	complete = {
		OR = {
			c:HER ={
				is_subject_of = c:PER
			}
			AND = {
				custom_tooltip = {
					text = herat_conquered_tt
					NOT = { exists = c:HER }
					c:PER = {
						has_state_in_state_region = STATE_WESTERN_AFGHANISTAN
					}
				}
			}
			has_variable = herat_gained_independence
			
		}
		
	}

	on_complete = {
		custom_tooltip = {
			text = integrate_herat_iran_je_txt
			set_variable = integrated_herat_iran
		}
	}

	weight = 10000
}