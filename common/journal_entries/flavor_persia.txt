je_centralize_iran = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	complete = {
		has_technology_researched = centralization
        NOT = { has_law = law_type:law_hereditary_bureaucrats }
	}

	on_complete = {
		trigger_event = { id = iran_abolish_autonomy.1 } # Inherit the Khanates and Emirates
		hidden_effect = {
			add_journal_entry = {
				type = je_centralize_iran_process
			}
			add_journal_entry = {
				type = je_persia_integrate_khans
			}
			add_journal_entry = {
				type = je_persia_reclaim_coast
			}
			add_journal_entry = {
				type = je_persia_integrate_qaenat
			}
			add_journal_entry = {
				type = je_persia_integrate_herat
			}
		}
	}

    should_be_pinned_by_default = yes
	weight = 100
}

je_centralize_iran_process = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	complete = {
		custom_tooltip = {
			text = integrate_khanates_iran
			has_variable = integrated_khanates_iran
		}
		custom_tooltip = {
			text = reclaim_coast_iran
			has_variable = reclaimed_coast_iran
		}
		custom_tooltip = {
			text = integrate_qaenat_iran
			has_variable = integrated_qaenat_iran
		}
		custom_tooltip = {
			text = integrate_herat_iran
			has_variable = integrated_herat_iran
		}
	}
	
	timeout = 22000

	on_complete = {
		trigger_event = { id = iran_flavour_wip.1 }
		remove_modifier = a_shah_in_name
	}

	on_timeout = {
		trigger_event = { id = iran_flavour_wip.2 }
	}

	goal_add_value = {
		add = 4
	}

	progressbar = yes

	weight = 10000
	should_be_pinned_by_default = yes
}

je_persia_integrate_khans = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	complete = {
		custom_tooltip = {
			text = integrate_khanates_iran
			has_variable = wip_pp
		}
	}

	on_complete = {
		custom_tooltip = {
			text = integrate_khanates_iran_je_txt
			set_variable = integrated_khanates_iran
		}
	}

	weight = 10000
}

je_persia_reclaim_coast = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	complete = {
		custom_tooltip = {
			text = integrate_khanates_iran
			has_variable = wip_pp
		}
	}

	on_complete = {
		custom_tooltip = {
			text = reclaim_coast_iran_je_txt
			set_variable = reclaimed_coast_iran
		}
	}

	weight = 10000
}

je_persia_integrate_qaenat = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	complete = {
		custom_tooltip = {
			text = integrate_khanates_iran
			has_variable = wip_pp
		}
	}

	on_complete = {
		custom_tooltip = {
			text = integrate_qaenat_iran_je_txt
			set_variable = integrated_qaenat_iran
		}
	}

	weight = 10000
}

je_persia_integrate_herat = {
	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	complete = {
		custom_tooltip = {
			text = integrate_khanates_iran
			has_variable = wip_pp
		}
	}

	on_complete = {
		custom_tooltip = {
			text = integrate_herat_iran_je_txt
			set_variable = integrated_herat_iran
		}
	}

	weight = 10000
}